= Steps to release wildfly bootable jar maven plugin

== STEP 1: Prepare and perform the release

First, make sure you don't have pending changes in your master branch.

* `cd wildfly-jar-maven-plugin`
* `git checkout master`
* `pull --rebase upstream master`
* Validate that all examples build: `cd examples, mvn clean package`. NB: exclude temporarily mdb-rar and 
gradle-demo that doesn't build but we want them in the parent pom file to update their pom version.
* Build grade-demo using gradle. Build mdb-rar in the mdb-rar directory.
* Update in pom.xml docs.project.branch to reference the new release
* Update in pom.xml docs.wildfly.major to reference the WildFly major release (if a new WildFly final release on which the plugin depends has been released).
* Update the examples/pom.xml file to reference the released plugin
* Update the examples version:
** cd examples
** mvn versions:set -DnewVersion=<new released version>
** mvn versions:commit
** cd ..
* Commit the changes with message: `Update docs and examples to X.X.X.Final`
* Run tests: `mvn clean install -Dskip.perf.tests=false`
* `mvn release:prepare -Darguments="-DskipTests"`
* `mvn release:perform -Darguments="-DskipTests"`
* Update in pom.xml docs.project.branch to reference master
* Update the examples/pom.xml file to reference the snapshot plugin
* Update the examples version:
** cd examples
** mvn versions:set -DnewVersion=<new snapshot version>
** mvn versions:commit
** cd ..
* Commit the changes with message: `Update docs and examples to X.X.X.Final-SNAPSHOT`
* `git push upstream master`

== STEP 2: Release in Nexus

* Log to `https://repository.jboss.org/nexus`
* Close the staging repository.
* Release the closed repository.

== STEP 3: Release doc in github

* Attach the docs/target/generated-docs/index.html to the latest release

== STEP 3: Release doc in wildfly.github.io

* Copy generated doc to wildfly.github.io/bootablejar directory
* Update wildfly.github.io/index.adoc with new release.
* Open PR.
